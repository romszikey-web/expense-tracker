{% extends 'base.html' %}
{% block title %}My Expenses{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h3">All Expenses</h1>
  <a class="btn btn-primary" href="{% url 'add_expense' %}"><i class="bi bi-plus-lg"></i> Add Expense</a>
  <a class="btn btn-primary" href="{% url 'expense_insights' %}"><i class="bi bi-plus-lg"></i>Expense insights</a>
</div>
</div>
<div class="card shadow-sm">
  <div class="table-responsive">
    <table class="table table-hover mb-0">
      <thead class="table-light">
        <tr>
          <th>Date</th>
          <th>Title</th>
          <th class="text-end">Amount</th>
          <th>Category</th>
          <th class="text-end">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for expense in expenses %}
          <tr>
            <td>{{ expense.date }}</td>
            <td>{{ expense.title }}</td>
            <td class="text-end">â‚¦{{ expense.amount }}</td>
            <td>{{ expense.category }}</td>
            <td class="text-end">
              <a class="btn btn-sm btn-outline-secondary me-1" href="{% url 'edit_expense' expense.pk %}">
                <i class="bi bi-pencil"></i> Edit
              </a>
              <!-- inline delete form (POST) -->
              <form method="post" action="{% url 'delete_expense' expense.pk %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Delete this expense?');">
                  <i class="bi bi-trash"></i> Delete
                </button>
              </form>
              {% empty %}
          <tr>
            <td colspan="5" class="text-center py-4">
              No expenses yet. <a href="{% url 'add_expense' %}">Add your first expense</a>.
            </td>
          </tr>
        {% endfor %}
        </tbody>
    </table>
  </div>
</div>
{% endblock %}